# Complete FREE Voice Bot Solution for Indian Users

## Option 1: Twilio Trial (Limited but Free)

### Setup Steps:

1. **Get Twilio Trial Account**
   - Sign up at Twilio.com
   - Get $15 credit + 1 free US number (works globally)
   - Note: You'll get a US number like `+1-XXX-XXX-XXXX`

2. **Verify Indian Phone Numbers**
   ```bash
   # In Twilio Console -> Phone Numbers -> Verified Caller IDs
   # Add each Indian number that should be able to call
   # Process: Enter number â†’ Receive SMS â†’ Enter verification code
   ```

3. **Who Can Call:**
   - âœ… **You** (after verifying your Indian number)
   - âœ… **Your test users** (after verifying their numbers)
   - âœ… **Family/friends** (up to ~20 verified numbers)
   - âŒ **Random public users** (not verified)

4. **Call Flow:**
   - Indian user calls your US Twilio number: `+1-XXX-XXX-XXXX`
   - International calling rates apply to caller
   - Your bot responds in Hindi/English
   - Perfect for demos, testing, small user base

---

## Option 2: Alternative FREE Solutions (Public Access)

### A) Using WebRTC (Browser-based Calls)

Instead of phone calls, create a **web-based voice interface**:

```javascript
// Web app that users can access from browser
// Uses browser's built-in speech recognition + synthesis
// Completely free, no phone numbers needed

const recognition = new webkitSpeechRecognition();
recognition.lang = 'hi-IN'; // or 'en-US'
recognition.onresult = function(event) {
    const speechText = event.results[0][0].transcript;
    // Send to your HuggingFace API
    processUserSpeech(speechText);
};

const synthesis = window.speechSynthesis;
function speakResponse(text, lang) {
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = lang === 'hi' ? 'hi-IN' : 'en-US';
    synthesis.speak(utterance);
}
```

**Benefits:**
- âœ… **Completely free**
- âœ… **Anyone can access** via browser
- âœ… **No phone number limitations**
- âœ… **Works on mobile browsers**

### B) WhatsApp Business API (Voice Messages)

```javascript
// Users send voice messages to your WhatsApp Business number
// You process with speech-to-text and respond with voice
// Using Twilio WhatsApp API (also has free tier)

app.post('/whatsapp', async (req, res) => {
    const mediaUrl = req.body.MediaUrl0; // Voice message URL
    
    // Download and process voice message
    const audioBuffer = await downloadAudio(mediaUrl);
    const transcription = await speechToText(audioBuffer);
    
    // Get AI response
    const reply = await getHFReply(transcription);
    
    // Send voice reply back via WhatsApp
    await sendWhatsAppVoiceReply(reply, req.body.From);
});
```

---

## Option 3: Upgrade Strategy (Minimal Cost)

### For Real Business Use:

1. **Upgrade Twilio Account**: ~$20/month
   - âœ… **Anyone can call** (no verification needed)
   - âœ… **Get Indian local number** (+91-XXXX-XXXX)
   - âœ… **Unlimited incoming calls**
   - âœ… **Professional setup**

2. **Alternative: Indian VoIP Providers**
   - **Exotel**: Indian company, competitive rates
   - **Knowlarity**: Supports Hindi STT/TTS
   - **Ozonetel**: Good for Indian market

---

## Recommended FREE Approach for Testing:

### 1. Start with WebRTC Version

Create a simple web app that users can visit:

```html
<!DOCTYPE html>
<html>
<head>
    <title>Photography Studio Voice Assistant</title>
</head>
<body>
    <h1>ðŸŽ¤ Voice Assistant</h1>
    <button id="startBtn">Start Speaking (Hindi/English)</button>
    <div id="transcript"></div>
    <div id="response"></div>
    
    <script>
        // Your voice recognition + HuggingFace integration
        // Users simply visit your website and click to talk
    </script>
</body>
</html>
```

### 2. For Demo Purposes: Use Twilio Trial

- Verify 5-10 key phone numbers (friends, family, potential clients)
- Use US Twilio number for demos
- Explain to users: "Call this US number to test our voice assistant"

### 3. Scale Up When Ready

- Once you have paying customers, upgrade Twilio
- Get Indian local number
- Enable public access

---

## Complete Code for WebRTC Version

Want me to create the **browser-based voice assistant** that works immediately without any phone number limitations? It would be:

- âœ… **100% Free**
- âœ… **Public access** (anyone can use)
- âœ… **Hindi + English support**
- âœ… **Works on mobile**
- âœ… **No verification needed**

This might actually be **better** than phone calls for most users, especially younger demographics who prefer web/app interfaces.

---

## Summary

**For Testing/Demo:** Use Twilio trial + verify key numbers
**For Public Launch:** Use WebRTC browser version (free) or upgrade Twilio (~$20/month)
**For Business:** Upgrade to paid Twilio or use Indian VoIP providers

Which approach would you like me to implement first?


//code snippet

// index.js - Enhanced with Hindi + English support
import express from "express";
import bodyParser from "body-parser";
import { urlencoded } from "body-parser";
import fetch from "node-fetch";
import { twiml } from "twilio";
import dotenv from "dotenv";

dotenv.config();
const app = express();
app.use(bodyParser.json());
app.use(urlencoded({ extended: false }));

const {
  TWILIO_ACCOUNT_SID,
  TWILIO_AUTH_TOKEN,
  TWILIO_NUMBER,
  HF_TOKEN,
  HF_MODEL,
} = process.env;

// Language detection helper
function detectLanguage(text) {
  // Simple language detection based on script
  const hindiPattern = /[\u0900-\u097F]/; // Devanagari script
  return hindiPattern.test(text) ? 'hi' : 'en';
}

// â”€â”€â”€ 1) Incoming Call Handler with Language Selection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
app.post("/voice", (req, res) => {
  const twimlResponse = new twiml.VoiceResponse();

  // Check if user has already selected a language
  const selectedLang = req.body.Digits || req.query.lang;
  
  if (!selectedLang) {
    // Language selection menu
    const gather = twimlResponse.gather({
      action: "/language-select",
      method: "POST",
      input: "dtmf",
      numDigits: 1,
      timeout: 10,
    });

    gather.say(
      { voice: "alice", language: "en-US" },
      "Welcome! Press 1 for English or 2 for Hindi. à¤¸à¥à¤µà¤¾à¤—à¤¤ à¤¹à¥ˆ! à¤…à¤‚à¤—à¥à¤°à¥‡à¤œà¥€ à¤•à¥‡ à¤²à¤¿à¤ 1 à¤¯à¤¾ à¤¹à¤¿à¤‚à¤¦à¥€ à¤•à¥‡ à¤²à¤¿à¤ 2 à¤¦à¤¬à¤¾à¤à¤‚à¥¤"
    );

    twimlResponse.redirect("/voice");
  } else {
    // Start conversation in selected language
    startConversation(twimlResponse, selectedLang);
  }

  res.type("text/xml");
  res.send(twimlResponse.toString());
});

// â”€â”€â”€ 2) Language Selection Handler â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
app.post("/language-select", (req, res) => {
  const selectedDigit = req.body.Digits;
  const twimlResponse = new twiml.VoiceResponse();

  if (selectedDigit === "1") {
    startConversation(twimlResponse, "en");
  } else if (selectedDigit === "2") {
    startConversation(twimlResponse, "hi");
  } else {
    // Invalid selection, try again
    twimlResponse.say(
      { voice: "alice", language: "en-US" },
      "Invalid selection. Please try again."
    );
    twimlResponse.redirect("/voice");
  }

  res.type("text/xml");
  res.send(twimlResponse.toString());
});

// â”€â”€â”€ 3) Start Conversation in Selected Language â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function startConversation(twimlResponse, language) {
  const gather = twimlResponse.gather({
    action: `/gather?lang=${language}`,
    method: "POST",
    input: "speech",
    speechModel: "default",
    language: language === "hi" ? "hi-IN" : "en-US",
    hints: language === "hi" ? 
      "à¤¬à¥à¤•à¤¿à¤‚à¤—, à¤‘à¤°à¥à¤¡à¤°, à¤¨à¤®à¤¸à¥à¤¤à¥‡, à¤…à¤ªà¥‰à¤‡à¤‚à¤Ÿà¤®à¥‡à¤‚à¤Ÿ, à¤¸à¥à¤¥à¤¿à¤¤à¤¿" : 
      "booking, order, appointment, status, help",
    timeout: 5,
  });

  if (language === "hi") {
    gather.say(
      { voice: "Polly.Priya", language: "hi-IN" },
      "à¤¨à¤®à¤¸à¥à¤¤à¥‡! à¤®à¥ˆà¤‚ à¤†à¤ªà¤•à¥€ à¤«à¤¼à¥‹à¤Ÿà¥‹à¤—à¥à¤°à¤¾à¤«à¥€ à¤¸à¥à¤Ÿà¥‚à¤¡à¤¿à¤¯à¥‹ à¤¸à¤¹à¤¾à¤¯à¤¿à¤•à¤¾ à¤¹à¥‚à¤à¥¤ à¤†à¤ª à¤•à¥à¤¯à¤¾ à¤œà¤¾à¤¨à¤¨à¤¾ à¤šà¤¾à¤¹à¤¤à¥‡ à¤¹à¥ˆà¤‚? à¤‰à¤¦à¤¾à¤¹à¤°à¤£ à¤•à¥‡ à¤²à¤¿à¤, à¤¨à¤¯à¤¾ à¤…à¤ªà¥‰à¤‡à¤‚à¤Ÿà¤®à¥‡à¤‚à¤Ÿ à¤¬à¥à¤• à¤•à¤°à¥‡à¤‚ à¤¯à¤¾ à¤…à¤ªà¤¨à¥‡ à¤‘à¤°à¥à¤¡à¤° à¤•à¥€ à¤¸à¥à¤¥à¤¿à¤¤à¤¿ à¤ªà¥‚à¤›à¥‡à¤‚à¥¤"
    );
  } else {
    gather.say(
      { voice: "alice", language: "en-US" },
      "Hello! I'm your photography studio assistant. How can I help you today? You can book a new appointment, check your order status, or ask any questions."
    );
  }

  twimlResponse.redirect(`/voice?lang=${language}`);
}

// â”€â”€â”€ 4) Handle Transcribed Speech (Bilingual) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
app.post("/gather", async (req, res) => {
  const speechText = req.body.SpeechResult || "";
  const selectedLang = req.query.lang || detectLanguage(speechText);
  
  console.log(`Transcribed (${selectedLang}):`, speechText);

  // Process the request
  let assistantReply = await processRequest(speechText, selectedLang);

  const twimlResponse = new twiml.VoiceResponse();
  
  if (selectedLang === "hi") {
    twimlResponse.say(
      { voice: "Polly.Priya", language: "hi-IN" },
      assistantReply
    );
  } else {
    twimlResponse.say(
      { voice: "alice", language: "en-US" },
      assistantReply
    );
  }

  // Option to continue conversation or hang up
  const gather = twimlResponse.gather({
    action: `/gather?lang=${selectedLang}`,
    method: "POST",
    input: "speech",
    speechModel: "default",
    language: selectedLang === "hi" ? "hi-IN" : "en-US",
    timeout: 3,
  });

  if (selectedLang === "hi") {
    gather.say(
      { voice: "Polly.Priya", language: "hi-IN" },
      "à¤•à¥à¤¯à¤¾ à¤†à¤ªà¤•à¤¾ à¤•à¥‹à¤ˆ à¤”à¤° à¤¸à¤µà¤¾à¤² à¤¹à¥ˆ?"
    );
  } else {
    gather.say(
      { voice: "alice", language: "en-US" },
      "Do you have any other questions?"
    );
  }

  twimlResponse.hangup();

  res.type("text/xml");
  res.send(twimlResponse.toString());
});

// â”€â”€â”€ 5) Process Requests with Built-in Logic + LLM Fallback â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function processRequest(userText, language) {
  const textLower = userText.toLowerCase();
  
  // Appointment booking logic
  if (isBookingRequest(textLower, language)) {
    return handleBooking(userText, language);
  }
  
  // Order tracking logic
  if (isOrderTrackingRequest(textLower, language)) {
    return handleOrderTracking(userText, language);
  }
  
  // Pricing inquiry
  if (isPricingRequest(textLower, language)) {
    return handlePricing(language);
  }
  
  // Fallback to LLM for general questions
  return await getHFReply(userText, language);
}

// â”€â”€â”€ 6) Built-in Business Logic Functions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function isBookingRequest(text, lang) {
  const hindiKeywords = ["à¤…à¤ªà¥‰à¤‡à¤‚à¤Ÿà¤®à¥‡à¤‚à¤Ÿ", "à¤¬à¥à¤•", "à¤¬à¥à¤•à¤¿à¤‚à¤—", "à¤®à¤¿à¤²à¤¨à¤¾", "à¤¸à¤®à¤¯"];
  const englishKeywords = ["appointment", "book", "booking", "schedule", "meet"];
  const keywords = lang === "hi" ? hindiKeywords : englishKeywords;
  return keywords.some(keyword => text.includes(keyword));
}

function isOrderTrackingRequest(text, lang) {
  const hindiKeywords = ["à¤‘à¤°à¥à¤¡à¤°", "à¤¸à¥à¤¥à¤¿à¤¤à¤¿", "à¤Ÿà¥à¤°à¥ˆà¤•", "à¤•à¤¹à¤¾à¤‚", "à¤•à¤¬"];
  const englishKeywords = ["order", "status", "track", "where", "when"];
  const keywords = lang === "hi" ? hindiKeywords : englishKeywords;
  return keywords.some(keyword => text.includes(keyword));
}

function isPricingRequest(text, lang) {
  const hindiKeywords = ["à¤•à¥€à¤®à¤¤", "à¤°à¥‡à¤Ÿ", "à¤ªà¥ˆà¤¸à¥‡", "à¤°à¥à¤ªà¤¯à¥‡", "à¤«à¥€à¤¸"];
  const englishKeywords = ["price", "cost", "rate", "money", "fee", "charge"];
  const keywords = lang === "hi" ? hindiKeywords : englishKeywords;
  return keywords.some(keyword => text.includes(keyword));
}

function handleBooking(userText, language) {
  // In a real app, you'd parse date/time and save to database
  if (language === "hi") {
    return "à¤†à¤ªà¤•à¤¾ à¤…à¤ªà¥‰à¤‡à¤‚à¤Ÿà¤®à¥‡à¤‚à¤Ÿ à¤¬à¥à¤• à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤§à¤¨à¥à¤¯à¤µà¤¾à¤¦! à¤¹à¤®à¤¾à¤°à¥€ à¤Ÿà¥€à¤® 24 à¤˜à¤‚à¤Ÿà¥‡ à¤®à¥‡à¤‚ à¤†à¤ªà¤¸à¥‡ à¤¸à¤‚à¤ªà¤°à¥à¤• à¤•à¤°à¥‡à¤—à¥€à¥¤ à¤•à¥à¤¯à¤¾ à¤†à¤ªà¤•à¥‹ à¤•à¥‹à¤ˆ à¤µà¤¿à¤¶à¥‡à¤· à¤¸à¤®à¤¯ à¤ªà¤¸à¤‚à¤¦ à¤¹à¥ˆ?";
  } else {
    return "Thank you for booking an appointment! Our team will contact you within 24 hours. Do you have any preferred time slots?";
  }
}

function handleOrderTracking(userText, language) {
  // In a real app, you'd query your order database
  if (language === "hi") {
    return "à¤†à¤ªà¤•à¤¾ à¤‘à¤°à¥à¤¡à¤° à¤ªà¥à¤°à¥‹à¤¸à¥‡à¤¸à¤¿à¤‚à¤— à¤®à¥‡à¤‚ à¤¹à¥ˆ à¤”à¤° 3-5 à¤¦à¤¿à¤¨à¥‹à¤‚ à¤®à¥‡à¤‚ à¤¤à¥ˆà¤¯à¤¾à¤° à¤¹à¥‹ à¤œà¤¾à¤à¤—à¤¾à¥¤ à¤†à¤ªà¤•à¥‹ à¤…à¤ªà¤¡à¥‡à¤Ÿ à¤•à¥‡ à¤²à¤¿à¤ SMS à¤®à¤¿à¤²à¥‡à¤—à¤¾à¥¤";
  } else {
    return "Your order is currently being processed and will be ready in 3-5 days. You'll receive SMS updates on the progress.";
  }
}

function handlePricing(language) {
  if (language === "hi") {
    return "à¤¹à¤®à¤¾à¤°à¥‡ à¤«à¥‹à¤Ÿà¥‹à¤¶à¥‚à¤Ÿ à¤ªà¥ˆà¤•à¥‡à¤œ 5000 à¤°à¥à¤ªà¤¯à¥‡ à¤¸à¥‡ à¤¶à¥à¤°à¥‚ à¤¹à¥‹à¤¤à¥‡ à¤¹à¥ˆà¤‚à¥¤ à¤ªà¥‹à¤°à¥à¤Ÿà¥à¤°à¥‡à¤Ÿ à¤¸à¥‡à¤¶à¤¨ 3000 à¤°à¥à¤ªà¤¯à¥‡, à¤µà¥‡à¤¡à¤¿à¤‚à¤— à¤ªà¥ˆà¤•à¥‡à¤œ 25000 à¤°à¥à¤ªà¤¯à¥‡ à¤¸à¥‡à¥¤ à¤…à¤§à¤¿à¤• à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€ à¤•à¥‡ à¤²à¤¿à¤ à¤¹à¤®à¤¾à¤°à¥€ à¤µà¥‡à¤¬à¤¸à¤¾à¤‡à¤Ÿ à¤¦à¥‡à¤–à¥‡à¤‚à¥¤";
  } else {
    return "Our photoshoot packages start from 5000 rupees. Portrait sessions are 3000 rupees, wedding packages start from 25000 rupees. Visit our website for detailed pricing.";
  }
}

// â”€â”€â”€ 7) Enhanced HF API Call with Language Support â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function getHFReply(userText, language) {
  try {
    const systemPrompt = language === "hi" ? 
      "à¤†à¤ª à¤à¤• à¤«à¥‹à¤Ÿà¥‹à¤—à¥à¤°à¤¾à¤«à¥€ à¤¸à¥à¤Ÿà¥‚à¤¡à¤¿à¤¯à¥‹ à¤•à¥€ à¤¸à¤¹à¤¾à¤¯à¤¿à¤•à¤¾ à¤¹à¥ˆà¤‚à¥¤ à¤—à¥à¤°à¤¾à¤¹à¤•à¥‹à¤‚ à¤•à¥€ à¤®à¤¦à¤¦ à¤•à¤°à¥‡à¤‚à¥¤" :
      "You are a photography studio assistant. Help customers with their queries.";
    
    const prompt = language === "hi" ?
      `System: ${systemPrompt}\nUser: ${userText}\nAssistant (in Hindi):` :
      `System: ${systemPrompt}\nUser: ${userText}\nAssistant:`;

    const payload = {
      inputs: prompt,
      options: { 
        wait_for_model: true, 
        use_cache: false,
        max_length: 150,
        temperature: 0.7
      },
    };

    const response = await fetch(
      `https://api-inference.huggingface.co/models/${HF_MODEL}`,
      {
        method: "POST",
        headers: {
          Authorization: `Bearer ${HF_TOKEN}`,
          "Content-Type": "application/json",
        },
        body: JSON.stringify(payload),
      }
    );

    if (!response.ok) {
      console.error("HF inference error:", await response.text());
      return language === "hi" ?
        "à¤•à¥à¤·à¤®à¤¾ à¤•à¤°à¥‡à¤‚, à¤‡à¤¸ à¤¸à¤®à¤¯ à¤®à¥ˆà¤‚ à¤†à¤ªà¤•à¥€ à¤¸à¤¹à¤¾à¤¯à¤¤à¤¾ à¤¨à¤¹à¥€à¤‚ à¤•à¤° à¤ªà¤¾ à¤°à¤¹à¤¾ à¤¹à¥‚à¤à¥¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤¬à¤¾à¤¦ à¤®à¥‡à¤‚ à¤ªà¥à¤¨à¤ƒ à¤ªà¥à¤°à¤¯à¤¾à¤¸ à¤•à¤°à¥‡à¤‚à¥¤" :
        "Sorry, I'm unable to assist you right now. Please try again later.";
    }

    const data = await response.json();
    let generated = "";
    
    if (Array.isArray(data) && data[0].generated_text) {
      generated = data[0].generated_text;
    } else if (data.generated_text) {
      generated = data.generated_text;
    } else {
      return language === "hi" ?
        "à¤®à¥à¤à¥‡ à¤†à¤ªà¤•à¤¾ à¤¸à¤‚à¤¦à¥‡à¤¶ à¤¸à¤®à¤ à¤®à¥‡à¤‚ à¤¨à¤¹à¥€à¤‚ à¤†à¤¯à¤¾à¥¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤ªà¥à¤¨à¤ƒ à¤•à¤¹à¥‡à¤‚à¥¤" :
        "I didn't understand your message. Please try again.";
    }

    // Clean up the response
    const assistantMarker = language === "hi" ? "Assistant (in Hindi):" : "Assistant:";
    if (generated.includes(assistantMarker)) {
      generated = generated.split(assistantMarker).pop().trim();
    }
    
    // Remove any remaining system prompts
    if (generated.includes("System:") || generated.includes("User:")) {
      const lines = generated.split('\n');
      generated = lines[lines.length - 1].trim();
    }
    
    return generated || (language === "hi" ? 
      "à¤®à¥ˆà¤‚ à¤†à¤ªà¤•à¥€ à¤¸à¤¹à¤¾à¤¯à¤¤à¤¾ à¤•à¤°à¤¨à¥‡ à¤•à¥€ à¤•à¥‹à¤¶à¤¿à¤¶ à¤•à¤° à¤°à¤¹à¤¾ à¤¹à¥‚à¤à¥¤" : 
      "I'm trying to help you with that.");

  } catch (err) {
    console.error("Error in getHFReply:", err);
    return language === "hi" ?
      "à¤•à¥à¤·à¤®à¤¾ à¤•à¤°à¥‡à¤‚, à¤•à¥à¤› à¤¤à¥à¤°à¥à¤Ÿà¤¿ à¤¹à¥‹ à¤—à¤ˆà¥¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤¬à¤¾à¤¦ à¤®à¥‡à¤‚ à¤ªà¥à¤°à¤¯à¤¾à¤¸ à¤•à¤°à¥‡à¤‚à¥¤" :
      "Sorry, there was an error. Please try again later.";
  }
}

const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
  console.log(`âž¤ Bilingual Voice Bot Server listening on http://localhost:${PORT}`);
  console.log(`âž¤ Supports: Hindi (hi-IN) and English (en-US)`);
});